webpackJsonp([1],{"/sp3":function(t,e){},"1QQs":function(t,e){},"3i99":function(t,e){},"8/Hn":function(t,e){},"9ZRB":function(t,e){},IoPH:function(t,e){},LQV3:function(t,e){},NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a("fZjL"),n=a.n(r),o=a("7+uW"),i=a("3EgV"),s=a.n(i),c={render:function(){var t=this.$createElement,e=this._self._c||t;return e("v-container",[e("router-view")],1)},staticRenderFns:[]};var l=a("VU/8")({},c,!1,function(t){a("xz0C")},null,null).exports,u=a("/ocq"),d=a("mtWM"),v=a.n(d).a.create({baseURL:"http://210.61.46.101:8888",timeout:6e4}),p=function(t,e){return v.post("/account/employee/login",{account:t,password:e})},f=function(t){return v.get("/account/backendCheck",{headers:{Auth:t}})},h=function(t){return v.get("/account/all",{headers:{Auth:t}})},_=function(t){return v.post("/account/checkAccount",{account:t})},m=function(t){return v.post("/account/checkEmail",{email:t})},b=function(t,e){return v.post("/account/employee/create",e,{headers:{Auth:t}})},g=function(t,e,a){return v.put("/account/"+e,a,{headers:{Auth:t}})},x=function(t,e){var a={headers:{Auth:t},data:{ids:e}};return v.delete("./account",a)},y=function(t){return v.get("./product/isbn/"+t)},k=function(t,e){var a={headers:{Auth:t,"content-type":"multipart/form-data"}};return v.post("./product/create",e,a)},w=function(){return v.get("./carousel")},$=function(t,e){var a={headers:{Auth:t,"content-type":"multipart/form-data"}};return v.post("./carousel",e,a)},C=function(t,e){return console.log(t),v.delete("/carousel/"+e,{headers:{Auth:t}})},S=function(t,e,a){var r=[e,a];return v.put("/carousel",r,{headers:{Auth:t}})},I=function(t){return v.get("/product/all",{headers:{Auth:t}})},D=function(t){return v.get("/product/"+t)},M=function(t,e){var a={headers:{Auth:t},data:{ids:e}};return v.delete("./product",a)},U=function(t,e,a){return v.put("./product/"+a,e,{headers:{Auth:t}})},A=function(t,e,a,r){var n=[a,r];return v.put("/product/queue/"+e,n,{headers:{Auth:t}})},R=function(t,e,a){var r={headers:{Auth:t,"content-type":"multipart/form-data"}};return v.post("./product/pic/"+e,a,r)},T=function(t,e,a){return v.delete("/product/pic/"+e+"/"+a,{headers:{Auth:t}})},z=function(){return v.get("/product/type")},P=function(t,e){return v.post("/product/type",e,{headers:{Auth:t}})},E=function(t,e,a){return v.put("/product/type/"+e,a,{headers:{Auth:t}})},F=function(t,e){var a={headers:{Auth:t},data:{id:e}};return v.delete("./product/type",a)},V=function(t,e,a){return v.put("./article/"+e,{content:a},{headers:{Auth:t}})},B=function(t){return v.get("./article/"+t)},O=function(t){return v.get("/order/all",{headers:{Auth:t}})},j=function(t,e){return v.put("/order/state",e,{headers:{Auth:t}})},L=function(t,e){var a={headers:{Auth:t},data:e};return console.log(a),v.delete("/order",a)},H={data:function(){return{account:"",password:""}},methods:{login:function(){var t=this;p(this.account,this.password).then(function(e){localStorage.setItem("token",e.data.token),t.$router.push("/home/homePage")}).catch(function(t){alert("帳號或密碼不正確")})}}},N={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",[a("v-card-text",{attrs:{align:"center"}},[a("b",[a("font",{attrs:{size:"6"}},[t._v("i2books後台系統")])],1)]),t._v(" "),a("v-flex",{attrs:{xs6:"","offset-xs3":""}},[a("v-card-text",[a("font",{attrs:{size:"5"}},[t._v("登入")])],1),t._v(" "),a("v-text-field",{staticClass:"input-group--focused",attrs:{label:"帳號"},model:{value:t.account,callback:function(e){t.account=e},expression:"account"}}),t._v(" "),a("v-text-field",{staticClass:"input-group--focused",attrs:{type:"password",label:"密碼"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),t._v(" "),a("center",[a("v-btn",{attrs:{large:""},on:{click:t.login}},[t._v("登入")])],1)],1)],1)},staticRenderFns:[]},G=a("VU/8")(H,N,!1,null,null,null).exports,Q={props:["path"],beforeMount:function(){var t=this,e=localStorage.getItem("token");f(e).catch(function(e){t.$router.push("/")})}},Z={render:function(){var t=this.$createElement,e=this._self._c||t;return e("v-container",[e("top",{attrs:{path:this.path}}),this._v(" "),e("v-layout",{attrs:{row:""}},[e("v-flex",{attrs:{xs2:""}},[e("left")],1),this._v(" "),e("v-flex",{attrs:{xs10:""}},[e("middle",{attrs:{path:this.path}})],1)],1)],1)},staticRenderFns:[]};var q=a("VU/8")(Q,Z,!1,function(t){a("8/Hn")},null,null).exports;o.default.use(u.a);var J=new u.a({routes:[{path:"/",name:"Startpage",component:G},{path:"/home/:path",name:"Home",component:q,props:!0}]}),W={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",[a("v-layout",{attrs:{column:""}},t._l(t.list,function(e){return a("v-btn",{key:e.title,on:{click:function(a){return t.changeRoute(e.src)}}},[t._v(t._s(e.title))])}),1)],1)},staticRenderFns:[]};var X=a("VU/8")({data:function(){return{list:[{title:"首頁",src:"homePage"},{title:"關於我們",src:"about"},{title:"產品刊登",src:"publish"},{title:"產品類別管理",src:"type"},{title:"產品管理",src:"product"},{title:"賣二手書",src:"sell"},{title:"會員管理",src:"member"},{title:"訂單管理",src:"order"}]}},methods:{changeRoute:function(t){this.$router.push("/home/"+t)}},beforeMount:function(){}},W,!1,function(t){a("/sp3")},null,null).exports,Y={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",["homePage"==t.path?a("v-card",{attrs:{flat:""}},[a("home")],1):t._e(),t._v(" "),"member"==t.path?a("v-card",{attrs:{flat:""}},[a("member")],1):t._e(),t._v(" "),"publish"==t.path?a("v-card",{attrs:{flat:""}},[a("publish")],1):t._e(),t._v(" "),"product"==t.path?a("v-card",{attrs:{flat:""}},[a("product")],1):t._e(),t._v(" "),"about"==t.path?a("v-card",{attrs:{flat:""}},[a("about")],1):t._e(),t._v(" "),"sell"==t.path?a("v-card",{attrs:{flat:""}},[a("sell")],1):t._e(),t._v(" "),"type"==t.path?a("v-card",{attrs:{flat:""}},[a("type")],1):t._e(),t._v(" "),"order"==t.path?a("v-card",{attrs:{flat:""}},[a("order")],1):t._e()],1)},staticRenderFns:[]};var K=a("VU/8")({props:["path"],beforeMount:function(){}},Y,!1,function(t){a("XdIG")},null,null).exports,tt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",[a("center",t._l(t.list,function(e){return a("div",{key:e.title},[e.src==t.path?a("font",{attrs:{size:"4"}},[t._v(t._s(e.title))]):t._e()],1)}),0)],1)},staticRenderFns:[]};var et=a("VU/8")({props:["path"],data:function(){return{list:[{title:"首頁",src:"homePage"},{title:"產品刊登",src:"publish"},{title:"產品管理",src:"product"},{title:"關於我們",src:"about"},{title:"賣二手書",src:"sell"},{title:"會員管理",src:"member"},{title:"電子報",src:"newsletter"},{title:"產品類別",src:"type"},{title:"訂單管理",src:"order"}]}},beforeMount:function(){}},tt,!1,function(t){a("IoPH")},null,null).exports,at={data:function(){return{pics:[]}},methods:{Upload:function(t,e,a){this.pics.push(e),this.pics[this.pics.length-1].url=URL.createObjectURL(e);var r=localStorage.getItem("token"),n=new FormData,o=this;n.append("pic",e),n.append("queue",this.pics.length-1),$(r,n).then(function(t){w().then(function(t){o.pics=t.data.pics}).catch(function(t){})}).catch(function(t){alert("新增失敗")})},deletePic:function(t){var e=this,a=localStorage.getItem("token");C(a,this.pics[t].id).then(function(a){e.pics.splice(t,1)}).catch(function(t){})},fronter:function(t){var e=this.pics[t-1],a=this.pics[t];this.pics[t-1]=a,this.pics[t]=e,this.pics.push();var r=localStorage.getItem("token");S(r,this.pics[t],this.pics[t-1]).then(function(t){}).catch(function(t){})},backer:function(t){var e=this.pics[t+1],a=this.pics[t];this.pics[t+1]=a,this.pics[t]=e,this.pics.push();var r=localStorage.getItem("token");S(r,this.pics[t],this.pics[t+1]).then(function(t){}).catch(function(t){})}},beforeMount:function(){var t=this;w().then(function(e){console.log(e.data.pics),t.pics=e.data.pics}).catch(function(t){})}},rt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",[a("font",{attrs:{size:"3"}},[a("p",[t._v("圖片:")])]),t._v(" "),a("v-carousel",{attrs:{cycle:!1,height:"480px"}},t._l(t.pics,function(e,r){return a("v-carousel-item",{key:r,attrs:{"next-icon":"mdi-dark mdi-arrow-right"}},[0!==r?a("v-btn",{on:{click:function(e){return t.fronter(r)}}},[t._v("上移")]):t._e(),t._v(" "),r!==t.pics.length-1?a("v-btn",{on:{click:function(e){return t.backer(r)}}},[t._v("下移")]):t._e(),t._v(" "),a("v-btn",{on:{click:function(e){return t.deletePic(r)}}},[t._v("刪除圖片")]),t._v(" "),a("v-img",{attrs:{src:e.url,contain:""}})],1)}),1),t._v(" "),a("center",[a("upload-button",{attrs:{title:"新增圖片",name:"pic",selectedCallback:t.Upload}})],1),t._v(" "),a("br")],1)},staticRenderFns:[]};var nt=a("VU/8")(at,rt,!1,function(t){a("wRaw")},null,null).exports,ot=a("BO1k"),it=a.n(ot),st={data:function(){return{search:"",selected:[],pagination:{sortBy:"id",rowsPerPage:10},headers:[{text:"編號",align:"left",sortable:!0,value:"id"},{text:"名稱",align:"left",sortable:!1,value:"name"},{text:"帳號",align:"left",sortable:!1,value:"account"},{text:"權限等級",align:"left",sortable:!0,value:"level"},{text:"email",align:"left",sortable:!1,value:"email"},{text:"手機",align:"left",sortable:!1,value:"cellphone"},{text:"地址",align:"left",sortable:!1,value:"address"}],accounts:[],account:{id:"",name:"",email:"",account:"",password:"",cellphone:"",address:"",level:""},level:["一般會員","高級會員","員工"],dialog:[!1,!1,!1],errorMessages:["",""]}},watch:{"account.account":function(t,e){var a=this;_(t).then(function(){a.errorMessages[0]="此帳號已被使用"}).catch(function(t){a.errorMessages[0]=""})},"account.email":function(t,e){var a=this;m(t).then(function(){a.errorMessages[1]="此信箱已被使用"}).catch(function(t){a.errorMessages[1]=""})}},methods:{createAccount:function(){var t=!0,e=!1,a=void 0;try{for(var r,n=it()(["name","email","account","password","cellphone","address","level"]);!(t=(r=n.next()).done);t=!0){var o=r.value;this.account[o]="level"==o?"一般會員":""}}catch(t){e=!0,a=t}finally{try{!t&&n.return&&n.return()}finally{if(e)throw a}}},createConfirm:function(){var t={},e=!0,a=!1,r=void 0;try{for(var n,o=it()(["name","email","account","password","cellphone","address"]);!(e=(n=o.next()).done);e=!0){var i=n.value;""!=this.account[i]&&(t[i]=this.account[i])}}catch(t){a=!0,r=t}finally{try{!e&&o.return&&o.return()}finally{if(a)throw r}}if(t.level=this.level.indexOf(this.account.level),void 0!=t.account&&void 0!=t.password&&void 0!=t.name&&void 0!=t.email){var s=localStorage.getItem("token");b(s,t).then(function(t){alert("新增成功"),window.location.reload()}).catch(function(t){alert("新增失敗")})}else alert("必填選項未填寫")},update:function(){var t=!0,e=!1,a=void 0;try{for(var r,n=it()(["id","name","email","account","cellphone","address"]);!(t=(r=n.next()).done);t=!0){var o=r.value;this.account[o]=this.selected[0][o]}}catch(t){e=!0,a=t}finally{try{!t&&n.return&&n.return()}finally{if(e)throw a}}this.account.level=this.level[this.selected[0].level],this.account.password=""},updateConfirm:function(){var t=localStorage.getItem("token"),e={},a=this.account.id,r={};for(var n in this.accounts)this.accounts[n].id==a&&(r=this.accounts[n]);var o=!0,i=!1,s=void 0;try{for(var c,l=it()(["name","email","address","cellphone"]);!(o=(c=l.next()).done);o=!0){n=c.value;this.account[n]!=r[n]&&(e[n]=this.account[n]),console.log(this.account[n]),console.log(r[n])}}catch(t){i=!0,s=t}finally{try{!o&&l.return&&l.return()}finally{if(i)throw s}}r.level!=this.level.indexOf(this.account.level)&&(e.level=this.level.indexOf(this.account.level)),""!=this.account.name&&""!=this.account.email||alert("有必填選項未填"),""!=this.account.password&&(e.password=this.account.password),void 0!=e.name||void 0!=e.email||void 0!=e.password||void 0!=e.address||void 0!=e.cellphone||void 0!=e.level?void 0!==e.email?m(e.email).then(function(t){alert("信箱已被使用")}).catch(function(r){g(t,a,e).then(function(t){alert("修改成功"),window.location.reload()}).catch(function(t){alert("修改失敗"),window.location.reload()})}):g(t,a,e).then(function(t){alert("修改成功"),window.location.reload()}).catch(function(t){alert("修改失敗"),window.location.reload()}):alert("無資料修改")},deleteAccount:function(){var t=localStorage.getItem("token"),e=[];for(var a in this.selected)e.push(this.selected[a].id);console.log(e),x(t,e).then(function(t){alert("刪除成功"),window.location.reload()}).catch(function(t){alert("刪除失敗"),window.location.reload()})}},beforeMount:function(){var t=localStorage.getItem("token"),e=this;h(t).then(function(t){e.accounts=t.data.accounts}).catch(function(t){})}},ct={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",[a("v-layout",{attrs:{row:""}},[a("v-dialog",{attrs:{width:"600"},model:{value:t.dialog[0],callback:function(e){t.$set(t.dialog,0,e)},expression:"dialog[0]"}},[a("v-btn",{attrs:{slot:"activator"},on:{click:function(e){return t.createAccount()}},slot:"activator"},[t._v("新增")]),t._v(" "),a("v-card",[a("br"),t._v(" "),a("br"),t._v(" "),a("center",[a("b",[a("font",{attrs:{size:"4"}},[t._v("新增")])],1)]),t._v(" "),a("v-flex",{attrs:{xs6:"","offset-xs3":""}},[a("v-text-field",{staticClass:"input-group--focused",attrs:{label:"*名稱"},model:{value:t.account.name,callback:function(e){t.$set(t.account,"name",e)},expression:"account.name"}}),t._v(" "),a("v-text-field",{staticClass:"input-group--focused",attrs:{label:"*帳號","error-messages":t.errorMessages[0]},model:{value:t.account.account,callback:function(e){t.$set(t.account,"account",e)},expression:"account.account"}}),t._v(" "),a("v-text-field",{staticClass:"input-group--focused",attrs:{label:"*密碼"},model:{value:t.account.password,callback:function(e){t.$set(t.account,"password",e)},expression:"account.password"}}),t._v(" "),a("v-select",{attrs:{attach:"",items:t.level,label:"權限等級","max-height":"150","offset-y":"",light:""},model:{value:t.account.level,callback:function(e){t.$set(t.account,"level",e)},expression:"account.level"}}),t._v(" "),a("v-text-field",{staticClass:"input-group--focused",attrs:{label:"*信箱","error-messages":t.errorMessages[1]},model:{value:t.account.email,callback:function(e){t.$set(t.account,"email",e)},expression:"account.email"}}),t._v(" "),a("v-text-field",{staticClass:"input-group--focused",attrs:{label:"手機"},model:{value:t.account.cellphone,callback:function(e){t.$set(t.account,"cellphone",e)},expression:"account.cellphone"}}),t._v(" "),a("v-text-field",{staticClass:"input-group--focused",attrs:{label:"地址"},model:{value:t.account.address,callback:function(e){t.$set(t.account,"address",e)},expression:"account.address"}})],1),t._v(" "),a("br"),t._v(" "),a("center",[a("v-btn",{on:{click:function(e){return t.createConfirm()}}},[t._v("新增")])],1),t._v(" "),a("br")],1)],1),t._v(" "),1==t.selected.length?a("v-dialog",{attrs:{width:"600"},model:{value:t.dialog[1],callback:function(e){t.$set(t.dialog,1,e)},expression:"dialog[1]"}},[a("v-btn",{attrs:{slot:"activator"},on:{click:function(e){return t.update()}},slot:"activator"},[t._v("修改")]),t._v(" "),a("v-card",[a("br"),t._v(" "),a("br"),t._v(" "),a("center",[a("b",[a("font",{attrs:{size:"4"}},[t._v("修改")])],1)]),t._v(" "),a("v-flex",{attrs:{xs6:"","offset-xs3":""}},[a("v-text-field",{staticClass:"input-group--focused",attrs:{label:"名稱"},model:{value:t.account.name,callback:function(e){t.$set(t.account,"name",e)},expression:"account.name"}}),t._v(" "),a("v-text-field",{staticClass:"input-group--focused",attrs:{label:"密碼"},model:{value:t.account.password,callback:function(e){t.$set(t.account,"password",e)},expression:"account.password"}}),t._v(" "),a("v-select",{attrs:{attach:"",items:t.level,label:"權限等級","max-height":"150","offset-y":"",light:""},model:{value:t.account.level,callback:function(e){t.$set(t.account,"level",e)},expression:"account.level"}}),t._v(" "),a("v-text-field",{staticClass:"input-group--focused",attrs:{label:"信箱"},model:{value:t.account.email,callback:function(e){t.$set(t.account,"email",e)},expression:"account.email"}}),t._v(" "),a("v-text-field",{staticClass:"input-group--focused",attrs:{label:"手機"},model:{value:t.account.cellphone,callback:function(e){t.$set(t.account,"cellphone",e)},expression:"account.cellphone"}}),t._v(" "),a("v-text-field",{staticClass:"input-group--focused",attrs:{label:"地址"},model:{value:t.account.address,callback:function(e){t.$set(t.account,"address",e)},expression:"account.address"}})],1),t._v(" "),a("br"),t._v(" "),a("center",[a("v-btn",{on:{click:function(e){return t.updateConfirm()}}},[t._v("修改")])],1),t._v(" "),a("br")],1)],1):t._e(),t._v(" "),t.selected.length>=1?a("v-dialog",{attrs:{width:"600"},model:{value:t.dialog[2],callback:function(e){t.$set(t.dialog,2,e)},expression:"dialog[2]"}},[a("v-btn",{attrs:{slot:"activator"},slot:"activator"},[t._v("刪除")]),t._v(" "),a("v-card",[a("br"),t._v(" "),a("v-flex",{attrs:{"offset-xs1":""}},[a("p",[t._v("確認刪除以下帳戶:")]),t._v(" "),t._l(t.selected,function(e){return a("p",{key:e.id},[a("pre",[t._v("名稱:"+t._s(e.name)+"\t帳號:"+t._s(e.account))])])})],2),t._v(" "),a("center",[a("v-btn",{on:{click:function(e){return t.deleteAccount()}}},[t._v("刪除")])],1),t._v(" "),a("br")],1)],1):t._e(),t._v(" "),a("v-spacer"),t._v(" "),a("v-text-field",{staticClass:"input-group--focused",attrs:{label:"搜尋"},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),t._v(" "),a("v-spacer")],1),t._v(" "),a("br"),t._v(" "),a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.accounts,search:t.search,"item-key":"id","select-all":"",pagination:t.pagination},on:{"update:pagination":function(e){t.pagination=e}},scopedSlots:t._u([{key:"headerCell",fn:function(e){return[a("v-tooltip",{attrs:{bottom:""}},[a("span",{attrs:{slot:"activator"},slot:"activator"},[t._v("\n                "+t._s(e.header.text)+"\n                ")]),t._v(" "),a("span",[t._v("\n                "+t._s(e.header.text)+"\n                ")])])]}},{key:"items",fn:function(e){return[a("td",[a("v-checkbox",{attrs:{primary:"","hide-details":""},model:{value:e.selected,callback:function(a){t.$set(e,"selected",a)},expression:"props.selected"}})],1),t._v(" "),a("td",[t._v(t._s(e.item.id))]),t._v(" "),a("td",[t._v(t._s(e.item.name))]),t._v(" "),a("td",[t._v(t._s(e.item.account))]),t._v(" "),a("td",[t._v(t._s(t.level[e.item.level]))]),t._v(" "),a("td",[t._v(t._s(e.item.email))]),t._v(" "),a("td",[t._v(t._s(e.item.cellphone))]),t._v(" "),a("td",[t._v(t._s(e.item.address))])]}}]),model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}})],1)},staticRenderFns:[]};var lt=a("VU/8")(st,ct,!1,function(t){a("nveG")},null,null).exports,ut={data:function(){return{search:"",product:{title:"",isbn:"",type:"",authors:"",number:"",publisher:"",price:"",sell:"",ps:"",description:"",publishedDate:"",pics:[],visible:!0,on_sale:!1,hot:!1},types:[],errorMessages:[""]}},watch:{},methods:{isbnSearch:function(){var t=this;y(this.search).then(function(e){for(var a in t.product.title=e.data.book.title,t.product.publishedDate=e.data.book.publishedDate,t.product.publisher=e.data.book.publisher,t.product.authors="",e.data.book.authors)t.product.authors+=e.data.book.authors[a],a!=e.data.book.authors.length-1&&(t.product.authors+=",");t.product.isbn=t.search,console.log(t.product)}).catch(function(t){alert("查無此isbn")})},Upload:function(t,e,a){this.product.pics.push(e),this.product.pics[this.product.pics.length-1].url=URL.createObjectURL(e)},deletePic:function(t){this.product.pics.splice(t,1)},create:function(){var t=!0,e=!1,a=void 0;try{for(var r,n=it()(["title","isbn","type"]);!(t=(r=n.next()).done);t=!0){var o=r.value;if(""==this.product[o])return void alert("有必填選項未填")}}catch(t){e=!0,a=t}finally{try{!t&&n.return&&n.return()}finally{if(e)throw a}}var i=localStorage.getItem("token"),s=new FormData,c=!0,l=!1,u=void 0;try{for(var d,v=it()(["title","isbn","type","authors","number","price","sell","ps","description","publishedDate","pics","visible","on_sale","hot"]);!(c=(d=v.next()).done);c=!0){if("pics"==(o=d.value))for(var p in this.product.pics)s.append("pics",this.product.pics[p]);else s.append(o,this.product[o])}}catch(t){l=!0,u=t}finally{try{!c&&v.return&&v.return()}finally{if(l)throw u}}k(i,s).then(function(t){alert("新增成功"),window.location.reload()}).catch(function(t){alert("新增失敗")})},fronter:function(t){var e=this.product.pics[t-1],a=this.product.pics[t];this.product.pics[t-1]=a,this.product.pics[t]=e,this.product.pics.push()},backer:function(t){var e=this.product.pics[t+1],a=this.product.pics[t];this.product.pics[t+1]=a,this.product.pics[t]=e,this.product.pics.push()}},beforeMount:function(){var t=this;z().then(function(e){t.types=e.data.types}).catch(function(t){})}},dt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",[a("v-spacer"),t._v(" "),a("v-layout",{attrs:{row:""}},[a("v-text-field",{staticClass:"input-group--focused",attrs:{label:"ISBN搜尋"},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),t._v(" "),a("v-btn",{on:{click:function(e){return t.isbnSearch()}}},[a("v-icon",[t._v("search")])],1)],1),t._v(" "),a("v-spacer"),t._v(" "),a("v-layout",{attrs:{row:""}},[a("v-flex",{attrs:{xs5:"",md5:"",lg5:""}},[a("v-layout",{attrs:{column:""}},[a("v-text-field",{attrs:{label:"*書名",outline:"","error-messages":t.errorMessages[0]},model:{value:t.product.title,callback:function(e){t.$set(t.product,"title",e)},expression:"product.title"}}),t._v(" "),a("v-text-field",{attrs:{label:"*ISBN",outline:""},model:{value:t.product.isbn,callback:function(e){t.$set(t.product,"isbn",e)},expression:"product.isbn"}}),t._v(" "),a("v-select",{attrs:{label:"*類別",attach:"",items:t.types,"item-text":"name","item-value":"id"},model:{value:t.product.type,callback:function(e){t.$set(t.product,"type",e)},expression:"product.type"}}),t._v(" "),a("v-text-field",{attrs:{label:"作者",outline:""},model:{value:t.product.authors,callback:function(e){t.$set(t.product,"authors",e)},expression:"product.authors"}}),t._v(" "),a("v-layout",{attrs:{row:""}},[a("v-text-field",{attrs:{label:"出版日期",outline:""},model:{value:t.product.publishedDate,callback:function(e){t.$set(t.product,"publishedDate",e)},expression:"product.publishedDate"}}),t._v(" "),a("P",[t._v("   ")]),t._v(" "),a("v-text-field",{attrs:{label:"出版社",outline:""},model:{value:t.product.publisher,callback:function(e){t.$set(t.product,"publisher",e)},expression:"product.publisher"}})],1),t._v(" "),a("v-layout",{attrs:{row:""}},[a("v-text-field",{attrs:{label:"*原價",outline:""},model:{value:t.product.price,callback:function(e){t.$set(t.product,"price",e)},expression:"product.price"}}),t._v(" "),a("p",[t._v("   ")]),t._v(" "),a("v-text-field",{attrs:{label:"*售價",outline:""},model:{value:t.product.sell,callback:function(e){t.$set(t.product,"sell",e)},expression:"product.sell"}})],1),t._v(" "),a("p",[a("font",{attrs:{size:"4"}},[t._v("商品設定:")])],1),t._v(" "),a("v-layout",{attrs:{row:""}},[a("v-checkbox",{attrs:{label:"顯示"},model:{value:t.product.visible,callback:function(e){t.$set(t.product,"visible",e)},expression:"product.visible"}}),t._v(" "),a("v-checkbox",{attrs:{label:"特價"},model:{value:t.product.on_sale,callback:function(e){t.$set(t.product,"on_sale",e)},expression:"product.on_sale"}}),t._v(" "),a("v-checkbox",{attrs:{label:"熱賣品"},model:{value:t.product.hot,callback:function(e){t.$set(t.product,"hot",e)},expression:"product.hot"}})],1)],1)],1),t._v(" "),a("v-flex",{attrs:{"offset-xs1":""}},[a("font",{attrs:{size:"3"}},[a("p",[t._v("圖片:")])]),t._v(" "),a("v-carousel",{attrs:{cycle:!1,height:"550px"}},t._l(t.product.pics,function(e,r){return a("v-carousel-item",{key:r,attrs:{"next-icon":"mdi-dark mdi-arrow-right"}},[0!==r?a("v-btn",{on:{click:function(e){return t.fronter(r)}}},[t._v("上移")]):t._e(),t._v(" "),r!==t.product.pics.length-1?a("v-btn",{on:{click:function(e){return t.backer(r)}}},[t._v("下移")]):t._e(),t._v(" "),a("v-btn",{on:{click:function(e){return t.deletePic(r)}}},[t._v("刪除圖片")]),t._v(" "),a("v-img",{attrs:{src:e.url,contain:"","max-height":"460px"}})],1)}),1),t._v(" "),a("center",[a("upload-button",{attrs:{title:"新增圖片",name:"pic",selectedCallback:t.Upload}})],1)],1)],1),t._v(" "),a("font",{attrs:{size:"3"}},[a("p",[t._v("內容簡介:")])]),t._v(" "),a("v-textarea",{attrs:{"auto-grow":"",outline:""},model:{value:t.product.description,callback:function(e){t.$set(t.product,"description",e)},expression:"product.description"}}),t._v(" "),a("font",{attrs:{size:"3"}},[a("p",[t._v("備註:")])]),t._v(" "),a("v-textarea",{attrs:{"auto-grow":"",outline:""},model:{value:t.product.ps,callback:function(e){t.$set(t.product,"ps",e)},expression:"product.ps"}}),t._v(" "),a("center",[a("v-btn",{on:{click:function(e){return t.create()}}},[t._v("新增")])],1)],1)},staticRenderFns:[]};var vt=a("VU/8")(ut,dt,!1,function(t){a("1QQs")},null,null).exports,pt={name:"upload-button",props:{accept:String,selectedCallback:Function,title:String,name:String},methods:{fileSelected:function(t){this.selectedCallback&&(t.target.files[0]?this.selectedCallback(this.name,t.target.files[0],t.target.value):this.selectedCallback(null))}}},ft={render:function(){var t=this.$createElement,e=this._self._c||t;return e("v-btn",{staticClass:"btn--dark-flat-focused jbtn-file",attrs:{dark:""}},[this._v(" "+this._s(this.title)),e("input",{attrs:{type:"file",accept:"accept"},on:{change:this.fileSelected}})])},staticRenderFns:[]};var ht=a("VU/8")(pt,ft,!1,function(t){a("lUuB")},"data-v-5a485b02",null).exports,_t={data:function(){return{search:"",selected:[],pagination:{sortBy:"id",rowsPerPage:10},headers:[{text:"編號",align:"left",sortable:!0,value:"id"},{text:"書名",align:"left",sortable:!1,value:"title"},{text:"類別",align:"left",sortable:!0,value:"type"},{text:"顯示",align:"left",sortable:!0,value:"visible"},{text:"特價",align:"left",sortable:!0,value:"on_sale"},{text:"貨品狀況",align:"left",sortable:!0,value:"number"},{text:"詳細",align:"left",sortable:!1,value:"detail"}],products:[],product:{title:"",isbn:"",type:"",authors:"",number:"",price:"",sell:"",ps:"",description:"",publishedDate:"",publisher:"",pic:[],visible:!1,on_sale:!1,hot:!1,recommend:!1},types:[],dialog:[!1,!1,!1],errorMessages:[""],visible_map:["隱藏","顯示"],on_sale_map:["無","特價"]}},methods:{detail:function(t){for(var e in this.product={},this.products)if(this.products[e].id==t)return this.product=this.products[e],void(this.dialog[0]=!0)},update:function(t){for(var e in this.products)if(this.products[e].id==t)return this.product=this.products[e],this.product.type=parseInt(this.product.type),void console.log(this.product)},deleteConfirm:function(){var t=[];for(var e in this.selected)t[e]=this.selected[e].id;var a=localStorage.getItem("token");M(a,t).then(function(t){alert("刪除成功"),window.location.reload()}).catch(function(t){alert(t),window.location.reload()})},Upload:function(t,e,a){this.product.pic.push(e),this.product.pic[this.product.pic.length-1].url=URL.createObjectURL(e);var r=localStorage.getItem("token"),n=new FormData,o=this;n.append("pic",e),R(r,this.product.id,n).then(function(t){I(r).then(function(t){for(var e in o.products=t.data.products,t.data.products)t.data.products[e].id==o.product.id&&(o.product=t.data.products[e])})}).catch(function(t){alert("新增失敗")})},updateConfirm:function(){var t=!0,e=!1,a=void 0;try{for(var r,n=it()(["title","isbn","type"]);!(t=(r=n.next()).done);t=!0){var o=r.value;if(""==this.product[o])return void alert("有必填選項未填")}}catch(t){e=!0,a=t}finally{try{!t&&n.return&&n.return()}finally{if(e)throw a}}var i=localStorage.getItem("token"),s={},c=!0,l=!1,u=void 0;try{for(var d,v=it()(["title","isbn","type","authors","number","price","sell","ps","description","publishedDate","visible","on_sale"]);!(c=(d=v.next()).done);c=!0){s[o=d.value]=this.product[o]}}catch(t){l=!0,u=t}finally{try{!c&&v.return&&v.return()}finally{if(l)throw u}}U(i,s,this.product.id).then(function(t){alert("修改成功"),window.location.reload()}).catch(function(t){alert("修改失敗")})},fronter:function(t){var e=localStorage.getItem("token"),a=this.product.pic[t-1],r=this.product.pic[t];this.product.pic[t-1]=r,this.product.pic[t]=a,this.product.pic.push(),A(e,this.product.id,this.product.pic[t],this.product.pic[t-1]).then(function(t){}).catch(function(t){})},backer:function(t){var e=localStorage.getItem("token"),a=this.product.pic[t+1],r=this.product.pic[t];this.product.pic[t+1]=r,this.product.pic[t]=a,this.product.pic.push(),A(e,this.product.id,this.product.pic[t],this.product.pic[t+1]).then(function(t){}).catch(function(t){})},deletePic:function(t){var e=this,a=localStorage.getItem("token");T(a,this.product.id,t).then(function(a){console.log("succeed"),e.product.pic.splice(t,1)}).catch(function(t){})},typeMap:function(t){for(var e in this.types)if(this.types[e].id==t)return this.types[e].name}},beforeMount:function(){var t=this,e=localStorage.getItem("token");I(e).then(function(e){console.log(t.products),t.products=e.data.products}).catch(function(t){}),z().then(function(e){t.types=e.data.types}).catch(function(t){})}},mt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",[a("v-layout",{attrs:{row:""}},[1==t.selected.length?a("v-dialog",{attrs:{width:"1200"},model:{value:t.dialog[1],callback:function(e){t.$set(t.dialog,1,e)},expression:"dialog[1]"}},[a("v-btn",{attrs:{slot:"activator"},on:{click:function(e){return t.update(t.selected[0].id)}},slot:"activator"},[t._v("修改")]),t._v(" "),a("v-card",[a("br"),t._v(" "),a("br"),t._v(" "),a("v-flex",{attrs:{"offset-xs1":"",xs10:"",md10:"",lg10:""}},[a("v-layout",{attrs:{row:""}},[a("v-flex",{attrs:{xs4:"",md4:"",lg4:""}},[a("v-layout",{attrs:{column:""}},[a("v-text-field",{attrs:{label:"書名",outline:"","error-messages":t.errorMessages[0]},model:{value:t.product.title,callback:function(e){t.$set(t.product,"title",e)},expression:"product.title"}}),t._v(" "),a("v-text-field",{attrs:{label:"ISBN",outline:""},model:{value:t.product.isbn,callback:function(e){t.$set(t.product,"isbn",e)},expression:"product.isbn"}}),t._v(" "),a("v-select",{attrs:{label:"類別",attach:"",items:t.types,"item-text":"name","item-value":"id"},model:{value:t.product.type,callback:function(e){t.$set(t.product,"type",e)},expression:"product.type"}}),t._v(" "),a("v-text-field",{attrs:{label:"作者",outline:""},model:{value:t.product.authors,callback:function(e){t.$set(t.product,"authors",e)},expression:"product.authors"}}),t._v(" "),a("v-text-field",{attrs:{label:"出版日期",outline:""},model:{value:t.product.publishedDate,callback:function(e){t.$set(t.product,"publishedDate",e)},expression:"product.publishedDate"}}),t._v(" "),a("v-text-field",{attrs:{label:"數量",outline:""},model:{value:t.product.number,callback:function(e){t.$set(t.product,"number",e)},expression:"product.number"}}),t._v(" "),a("p",[t._v("商品設定:")]),t._v(" "),a("v-layout",{attrs:{row:""}},[a("v-checkbox",{attrs:{label:"顯示"},model:{value:t.product.visible,callback:function(e){t.$set(t.product,"visible",e)},expression:"product.visible"}}),t._v(" "),a("v-checkbox",{attrs:{label:"特價"},model:{value:t.product.on_sale,callback:function(e){t.$set(t.product,"on_sale",e)},expression:"product.on_sale"}})],1),t._v(" "),a("v-layout",{attrs:{row:""}},[a("v-text-field",{attrs:{label:"原價",outline:""},model:{value:t.product.price,callback:function(e){t.$set(t.product,"price",e)},expression:"product.price"}}),t._v(" "),a("v-spacer"),t._v(" "),a("v-text-field",{attrs:{label:"售價",outline:""},model:{value:t.product.sell,callback:function(e){t.$set(t.product,"sell",e)},expression:"product.sell"}})],1)],1)],1),t._v(" "),a("v-flex",{attrs:{"offset-xs1":""}},[a("font",{attrs:{size:"3"}},[a("p",[t._v("圖片:")])]),t._v(" "),a("v-carousel",{attrs:{cycle:!1,height:"500px"}},t._l(t.product.pic,function(e,r){return a("v-carousel-item",{key:r,attrs:{"next-icon":"mdi-dark mdi-arrow-right"}},[0!==r?a("v-btn",{on:{click:function(e){return t.fronter(r)}}},[t._v("上移")]):t._e(),t._v(" "),r!==t.product.pic.length-1?a("v-btn",{on:{click:function(e){return t.backer(r)}}},[t._v("下移")]):t._e(),t._v(" "),a("v-btn",{on:{click:function(e){return t.deletePic(r)}}},[t._v("刪除圖片")]),t._v(" "),a("v-img",{attrs:{src:e.url,contain:"",height:"380px"}})],1)}),1),t._v(" "),a("center",[a("upload-button",{attrs:{title:"新增圖片",name:"pic",selectedCallback:t.Upload}})],1)],1)],1)],1),t._v(" "),a("v-flex",{attrs:{"offset-xs1":"",xs10:"",md10:"",lg10:""}},[a("font",{attrs:{size:"3"}},[a("p",[t._v("內容簡介:")])]),t._v(" "),a("v-textarea",{attrs:{"auto-grow":"",outline:""},model:{value:t.product.description,callback:function(e){t.$set(t.product,"description",e)},expression:"product.description"}}),t._v(" "),a("font",{attrs:{size:"3"}},[a("p",[t._v("備註:")])]),t._v(" "),a("v-textarea",{attrs:{"auto-grow":"",outline:""},model:{value:t.product.ps,callback:function(e){t.$set(t.product,"ps",e)},expression:"product.ps"}})],1),t._v(" "),a("center",[a("v-btn",{on:{click:function(e){return t.updateConfirm()}}},[t._v("保存修改")])],1),t._v(" "),a("br")],1)],1):t._e(),t._v(" "),0!=t.selected.length?a("v-dialog",{attrs:{width:"200"},model:{value:t.dialog[2],callback:function(e){t.$set(t.dialog,2,e)},expression:"dialog[2]"}},[a("v-btn",{attrs:{slot:"activator"},slot:"activator"},[t._v("刪除")]),t._v(" "),a("v-card",[a("br"),t._v(" "),a("center",[a("p",[t._v("確認刪除以選項目?")]),t._v(" "),a("v-btn",{on:{click:function(e){return t.deleteConfirm()}}},[t._v("確認")])],1),t._v(" "),a("br")],1)],1):t._e(),t._v(" "),a("v-spacer"),t._v(" "),a("v-text-field",{staticClass:"input-group--focused",attrs:{label:"搜尋"},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),t._v(" "),a("v-spacer")],1),t._v(" "),a("br"),t._v(" "),a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.products,search:t.search,"item-key":"id","select-all":"",pagination:t.pagination},on:{"update:pagination":function(e){t.pagination=e}},scopedSlots:t._u([{key:"headerCell",fn:function(e){return[a("v-tooltip",{attrs:{bottom:""}},[a("span",{attrs:{slot:"activator"},slot:"activator"},[t._v("\n                "+t._s(e.header.text)+"\n                ")]),t._v(" "),a("span",[t._v("\n                "+t._s(e.header.text)+"\n                ")])])]}},{key:"items",fn:function(e){return[a("td",[a("v-checkbox",{attrs:{primary:"","hide-details":""},model:{value:e.selected,callback:function(a){t.$set(e,"selected",a)},expression:"props.selected"}})],1),t._v(" "),a("td",[t._v(t._s(e.item.id))]),t._v(" "),a("td",[t._v(t._s(e.item.title))]),t._v(" "),a("td",[t._v(t._s(t.typeMap(e.item.type)))]),t._v(" "),a("td",[t._v(t._s(t.visible_map[e.item.visible]))]),t._v(" "),a("td",[t._v(t._s(t.on_sale_map[e.item.on_sale]))]),t._v(" "),1==e.item.number?a("td",[t._v("有存貨")]):a("td",[a("font",{attrs:{color:"red"}},[t._v("已售罄")])],1),t._v(" "),a("td",[a("v-btn",{on:{click:function(a){return t.detail(e.item.id)}}},[t._v("詳細")])],1)]}}]),model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}}),t._v(" "),a("v-dialog",{attrs:{width:"1000px"},model:{value:t.dialog[0],callback:function(e){t.$set(t.dialog,0,e)},expression:"dialog[0]"}},[a("v-card",{attrs:{width:"1000px"}},[a("br"),t._v(" "),a("br"),t._v(" "),a("v-layout",[a("v-flex",{attrs:{xs4:""}},[a("v-layout",{attrs:{column:""}},[a("v-flex",{attrs:{"offset-xs2":""}},[a("font",{attrs:{size:"4"}},[a("p",[t._v("書名:  "+t._s(t.product.title))]),t._v(" "),a("p",[t._v("ISBN:  "+t._s(t.product.isbn))]),t._v(" "),a("p",[t._v("類別:  "+t._s(t.typeMap(t.product.type)))]),t._v(" "),a("p",[t._v("作者:  "+t._s(t.product.author))]),t._v(" "),a("p",[t._v("出版社:  "+t._s(t.product.publisher))]),t._v(" "),a("p",[t._v("出版日期:  "+t._s(t.product.publishedDate))]),t._v(" "),1==t.product.number?a("p",[t._v("貨品狀況:  "),a("font",{attrs:{color:"red"}},[t._v("已售罄")])],1):a("p",[t._v("貨品狀況:  有存貨")]),t._v(" "),a("p",[t._v("原價:  "+t._s(t.product.price))]),t._v(" "),a("p",[t._v("售價:  "+t._s(t.product.sell))]),t._v(" "),a("p",{staticStyle:{"{word-break":"break-all"}},[t._v("內容簡介:  "+t._s(t.product.description))]),t._v(" "),a("p",[t._v("備註:  "+t._s(t.product.ps))])])],1)],1)],1),t._v(" "),a("v-flex",{attrs:{xs6:"","offset-xs1":""}},[a("v-carousel",{attrs:{cycle:!1,height:"300px"}},t._l(t.product.pic,function(t,e){return a("v-carousel-item",{key:e,attrs:{"next-icon":"mdi-dark mdi-arrow-right"}},[a("v-img",{attrs:{src:t.url,contain:"",height:"280px"}})],1)}),1)],1)],1),t._v(" "),a("br"),t._v(" "),a("br")],1)],1)],1)},staticRenderFns:[]};var bt=a("VU/8")(_t,mt,!1,function(t){a("xATl")},null,null).exports,gt={props:["path"],data:function(){return{pagination:{sortBy:"id",rowsPerPage:10},search:"",selected:[],headers:[{text:"編號",align:"left",sortable:!0,value:"id"},{text:"名稱",align:"left",sortable:!1,value:"name"},{text:"",align:"left",sortable:!0,value:"delete"}],types:[],dialog:[!1,!1,!1],treeDialog:!1,deleteDialog:!1,type:{id:"",name:"",super_id:""},allTypeItems:[],typeItems:[],errorMessage:[""]}},watch:{"type.name":function(t,e){var a=!1;for(var r in this.allTypeItems)if(t==this.allTypeItems[r].name){this.errorMessage[0]="此類別名稱已存在",a=!0;break}a||(this.errorMessage[0]="")}},methods:{create:function(){this.type.name="",this.type.id="",this.typeItems=this.allTypeItems,this.type.super_id=0},createConfirm:function(){if(""!=this.type.name){var t={};for(var e in t.super_id=this.type.super_id,t.name=this.type.name,this.types)if(this.types[e].name==t.name)return void alert("此類別名稱已存在");var a=localStorage.getItem("token");P(a,t).then(function(t){alert("新增成功"),window.location.reload()}).catch(function(t){alert("此類別已存在")})}else alert("類別名稱不可為空")},getSuperType:function(t){var e=this.allTypeItems,a=this.getSubType(t);for(var r in a)e.splice(e.indexOf(a[r]),1);for(var r in e)if(e[r].id==t){e.splice(r,1);break}return e},getSubType:function(t){var e=[];for(var a in this.allTypeItems)this.allTypeItems[a].super_id==t&&e.push(this.allTypeItems[a]);if(0!=e.length){var r=[];for(var a in e){var n=this.getSubType(e[a].id);r=r.concat(n)}e=e.concat(r)}return e},update:function(){this.type.name=this.selected[0].name,this.type.id=this.selected[0].id,this.type.super_id=this.selected[0].super_id,this.typeItems=this.getSuperType(this.type.id)},updateConfirm:function(){if(""!=this.type.name){var t=localStorage.getItem("token"),e={};e.name=this.type.name,e.super_id=this.type.super_id,E(t,this.type.id,e).then(function(t){alert("修改成功"),window.location.reload()}).catch(function(t){alert("修改失敗")})}},deleteType:function(t){this.deleteDialog=!0,this.type.id=t},deleteConfirm:function(){var t=localStorage.getItem("token");F(t,this.type.id).then(function(t){alert("刪除成功"),window.location.reload()}).catch(function(t){alert(t),window.location.reload()})}},beforeMount:function(){var t=this;z().then(function(e){t.allTypeItems=e.data.types,t.types=[],t.types=t.types.concat(e.data.types);t.allTypeItems.splice(0,0,{id:0,name:"無"}),console.log(t.allTypeItems)})}},xt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",[a("v-btn",{on:{click:function(e){t.treeDialog=!0}}},[t._v("樹狀圖")]),t._v(" "),a("v-dialog",{attrs:{width:"600px"},model:{value:t.dialog[0],callback:function(e){t.$set(t.dialog,0,e)},expression:"dialog[0]"}},[a("v-btn",{attrs:{slot:"activator"},on:{click:function(e){return t.create()}},slot:"activator"},[t._v("新增")]),t._v(" "),a("v-card",[a("br"),t._v(" "),a("br"),t._v(" "),a("center",[a("b",[a("font",{attrs:{size:"4"}},[t._v("新增")])],1)]),t._v(" "),a("center",[a("v-flex",{attrs:{xs6:""}},[a("v-text-field",{staticClass:"input-group--focused",attrs:{label:"*類別名稱","error-messages":t.errorMessage[0]},model:{value:t.type.name,callback:function(e){t.$set(t.type,"name",e)},expression:"type.name"}}),t._v(" "),a("v-select",{attrs:{attach:"",label:"父類別",items:t.typeItems,"item-text":"name","item-value":"id","max-height":"150",dense:""},model:{value:t.type.super_id,callback:function(e){t.$set(t.type,"super_id",e)},expression:"type.super_id"}})],1)],1),t._v(" "),a("br"),t._v(" "),a("center",[a("v-btn",{on:{click:function(e){return t.createConfirm()}}},[t._v("新增")])],1),t._v(" "),a("br"),t._v(" "),a("br"),t._v(" "),a("br")],1)],1),t._v(" "),1==t.selected.length?a("v-dialog",{attrs:{width:"600px"},model:{value:t.dialog[1],callback:function(e){t.$set(t.dialog,1,e)},expression:"dialog[1]"}},[a("v-btn",{attrs:{slot:"activator"},on:{click:function(e){return t.update()}},slot:"activator"},[t._v("修改")]),t._v(" "),a("v-card",[a("br"),t._v(" "),a("br"),t._v(" "),a("center",[a("b",[a("font",{attrs:{size:"4"}},[t._v("修改")])],1)]),t._v(" "),a("center",[a("v-flex",{attrs:{xs6:""}},[a("v-text-field",{staticClass:"input-group--focused",attrs:{label:"*類別名稱"},model:{value:t.type.name,callback:function(e){t.$set(t.type,"name",e)},expression:"type.name"}}),t._v(" "),a("p",[t._v("父類別:")]),t._v(" "),a("v-select",{attrs:{attach:"",label:"類別名稱","max-height":"150",items:t.typeItems,"item-text":"name","item-value":"id",dense:""},model:{value:t.type.super_id,callback:function(e){t.$set(t.type,"super_id",e)},expression:"type.super_id"}})],1)],1),t._v(" "),a("br"),t._v(" "),a("center",[a("v-btn",{on:{click:function(e){return t.updateConfirm()}}},[t._v("修改")])],1),t._v(" "),a("br"),t._v(" "),a("br"),t._v(" "),a("br")],1)],1):t._e(),t._v(" "),a("v-dialog",{attrs:{width:"500px"},model:{value:t.deleteDialog,callback:function(e){t.deleteDialog=e},expression:"deleteDialog"}},[a("v-card",[a("br"),t._v(" "),a("br"),t._v(" "),a("center",[a("b",[a("font",{attrs:{size:"4",color:"red"}},[t._v("*請注意!!!若刪除的類別有子類別則會往上合併")]),a("br"),a("font",{attrs:{size:"4"}},[t._v("確認刪除?")])],1)]),t._v(" "),a("br"),t._v(" "),a("center",[a("v-btn",{on:{click:function(e){return t.deleteConfirm()}}},[t._v("刪除")])],1),t._v(" "),a("br"),t._v(" "),a("br")],1)],1),t._v(" "),a("br"),t._v(" "),a("br"),t._v(" "),a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.types,search:t.search,"item-key":"id","select-all":"",pagination:t.pagination},on:{"update:pagination":function(e){t.pagination=e}},scopedSlots:t._u([{key:"headerCell",fn:function(e){return[a("v-tooltip",{attrs:{bottom:""}},[a("span",{attrs:{slot:"activator"},slot:"activator"},[t._v("\n                "+t._s(e.header.text)+"\n                ")]),t._v(" "),a("span",[t._v("\n                "+t._s(e.header.text)+"\n                ")])])]}},{key:"items",fn:function(e){return[a("td",[a("v-checkbox",{attrs:{primary:"","hide-details":""},model:{value:e.selected,callback:function(a){t.$set(e,"selected",a)},expression:"props.selected"}})],1),t._v(" "),a("td",[t._v(t._s(e.item.id))]),t._v(" "),a("td",[t._v(t._s(e.item.name))]),t._v(" "),a("td",[a("v-btn",{on:{click:[function(a){return t.deleteType(e.item.id)},function(e){e.stopPropagation(),t.deleteDialog=!0}]}},[t._v("刪除")])],1)]}}]),model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}}),t._v(" "),a("v-dialog",{attrs:{fullscreen:""},model:{value:t.treeDialog,callback:function(e){t.treeDialog=e},expression:"treeDialog"}},[a("v-card",{attrs:{flat:""}},[a("center",[a("br"),t._v(" "),a("p",[a("b",[a("font",{attrs:{size:"4"}},[t._v("樹狀結構圖")])],1)]),t._v(" "),a("tree"),t._v(" "),a("v-btn",{on:{click:function(e){t.treeDialog=!1}}},[t._v("關閉")]),t._v(" "),a("br"),t._v(" "),a("br")],1)],1)],1)],1)},staticRenderFns:[]};var yt=a("VU/8")(gt,xt,!1,function(t){a("xFE2")},null,null).exports,kt={data:function(){return{editor:{info:""},isClear:!1}},watch:{},methods:{change:function(t){this.editor.info=t},save:function(){var t=localStorage.getItem("token");V(t,1,this.editor.info).then(function(t){alert("儲存成功"),window.location.reload()}).catch(function(t){alert("操作逾時")})}},beforeMount:function(){var t=this;B(1).then(function(e){t.editor.info=e.data.article.content}).catch(function(t){})}},wt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",[a("editorbar",{attrs:{isClear:t.isClear},on:{change:t.change},model:{value:t.editor.info,callback:function(e){t.$set(t.editor,"info",e)},expression:"editor.info"}}),t._v(" "),a("br"),t._v(" "),a("v-layout",{attrs:{"justify-center":""}},[a("v-btn",{on:{click:function(e){return t.save()}}},[t._v("儲存")])],1)],1)},staticRenderFns:[]};var $t=a("VU/8")(kt,wt,!1,function(t){a("shtZ")},null,null).exports,Ct=a("sYY+"),St=a.n(Ct),It={name:"Editorbar",data:function(){return{editor:null,info_:null}},model:{prop:"value",event:"change"},props:{value:{type:String,required:!0},isClear:{type:Boolean,default:!1}},watch:{isClear:function(t){t&&(this.editor.txt.clear(),this.info_=null)},value:function(t){this.editor.txt.html(t)}},mounted:function(){this.seteditor(),this.editor.txt.html(this.value)},methods:{seteditor:function(){var t=this;this.editor=new St.a(this.$refs.toolbar,this.$refs.editor),this.editor.customConfig.uploadImgShowBase64=!0,this.editor.customConfig.uploadImgMaxSize=3145728,this.editor.customConfig.menus=["fontSize","bold","fontName","italic","underline","strikeThrough","foreColor","backColor","link","justify","image","table"],this.editor.customConfig.uploadImgHooks={fail:function(t,e,a){},success:function(t,e,a){},timeout:function(t,e){},error:function(t,e){},customInsert:function(t,e,a){}},this.editor.customConfig.onchange=function(e){t.info_=e,t.$emit("change",t.info_)},this.editor.create()}}},Dt={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"editor"},[e("div",{ref:"toolbar",staticClass:"toolbar"}),this._v(" "),e("div",{ref:"editor",staticClass:"text"})])},staticRenderFns:[]};var Mt=a("VU/8")(It,Dt,!1,function(t){a("LQV3")},null,null).exports,Ut={data:function(){return{editor:{info:""},isClear:!1}},watch:{},methods:{change:function(t){this.editor.info=t},save:function(){var t=localStorage.getItem("token");V(t,2,this.editor.info).then(function(t){alert("儲存成功"),window.location.reload()}).catch(function(t){alert("操作逾時")})}},beforeMount:function(){var t=this;B(2).then(function(e){t.editor.info=e.data.article.content}).catch(function(t){})}},At={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",[a("editorbar",{attrs:{isClear:t.isClear},on:{change:t.change},model:{value:t.editor.info,callback:function(e){t.$set(t.editor,"info",e)},expression:"editor.info"}}),t._v(" "),a("br"),t._v(" "),a("v-layout",{attrs:{"justify-center":""}},[a("v-btn",{on:{click:function(e){return t.save()}}},[t._v("儲存")])],1)],1)},staticRenderFns:[]};var Rt=a("VU/8")(Ut,At,!1,function(t){a("9ZRB")},null,null).exports,Tt=a("hcCU"),zt={components:{TreeChart:a.n(Tt).a},data:function(){return{types:[],treeData:{name:"無",id:0,children:[]}}},methods:{treeGen:function(){this.treeData.children=this.getSubTree(0)},getSubTree:function(t){var e=[];for(var a in this.types)if(this.types[a].super_id==t){var r={};r.name=this.types[a].name,r.id=this.types[a].id,e.push(r)}if(0!=e.length){for(var a in e)e[a].children=this.getSubTree(e[a].id);return e}}},beforeMount:function(){var t=this;z().then(function(e){t.types=e.data.types,t.treeGen()})}},Pt={render:function(){var t=this.$createElement,e=this._self._c||t;return e("v-container",[e("TreeChart",{attrs:{json:this.treeData}})],1)},staticRenderFns:[]};var Et={data:function(){return{state:0,stateDialog:!1,stateItems:[{text:"訂單處理中",type:0},{text:"已出貨",type:1},{text:"訂單完成",type:2}],order:{headers:[{text:"訂單編號",align:"left",sortable:!1,value:"id"},{text:"姓名",align:"left",sortable:!1,value:"name"},{text:"手機",align:"left",sortable:!1,value:"cellphone"},{text:"下單日期",align:"left",sortable:!0,value:"date"},{text:"運送方式",align:"left",sortable:!1,value:"ship_type"},{text:"金額",align:"left",sortable:!1,value:"price"},{text:"貨品狀況",align:"left",sortable:!1,value:"state"},{text:"詳細",align:"center",sortable:!1,value:"content"}],shipState:[{type:0,text:"宅配+30",price:30}],pagination:{sortBy:"date",rowsPerPage:10},search:"",selected:[],list:[],detail:{name:"",cellphone:"",address:"",money:"",ship_type:0,state:0,date:"",account:"",headers:[{text:"書名",align:"left",sortable:!1,value:"title"},{text:"封面",align:"center",sortable:!1,value:"picture"},{text:"優惠價",align:"left",sortable:!1,value:"price"}],list:[],pagination:{sortBy:"date",rowsPerPage:5}},cancelDialog:!1,detailDialog:!1,detailID:-1}}},methods:{cancelOrder:function(){this.order.cancelDialog=!0,console.log(this.order.selected)},cancelOrderCheck:function(){var t=localStorage.getItem("token"),e={list:[]};for(var a in this.order.selected)e.list.push(this.order.selected[a].id);L(t,e).then(function(t){alert("取消成功")}).catch(function(t){alert("取消失敗")}).then(function(){location.reload()})},orderDetail:function(t){var e=this;for(var a in this.order.detail.list=[],this.order.list)if(this.order.list[a].id==t){this.order.detail.name=this.order.list[a].name,this.order.detail.cellphone=this.order.list[a].cellphone,this.order.detail.address=this.order.list[a].address,this.order.detail.money=this.order.list[a].money,this.order.detail.ship_type=this.order.list[a].ship_type,this.order.detail.state=this.order.list[a].state;var r=JSON.parse(this.order.list[a].cartlist),n=function(){var t=e;console.log(r[o]),D(r[o]).then(function(e){if(0!=e.data.product.pics)t.order.detail.list.push(e.data.product);else{var a=e.data.product;a.pic.push({url:"http://localhost:3000/uploadedFile/null.png"}),t.order.detail.list.push(a)}}).catch(function(t){})};for(var o in r)n();break}this.order.detailID=t,this.order.detailDialog=!0},changeState:function(){for(var t in this.order.selected)console.log(parseInt(this.order.selected[t].id,16));this.state=0,this.stateDialog=!0},changeStateCheck:function(){var t=localStorage.getItem("token"),e={list:[],state:this.state};for(var a in this.order.selected)e.list.push(parseInt(this.order.selected[a].id,16));j(t,e).then(function(){alert("變更成功"),window.location.reload()}).catch(function(t){alert("變更失敗"),window.location.reload()})}},beforeMount:function(){var t=this,e=localStorage.getItem("token");O(e).then(function(e){for(var a in t.order.list=e.data.orders,t.order.list)t.order.list[a].id=t.order.list[a].id.toString(16)}).catch(function(t){})}},Ft={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",[a("v-text-field",{staticClass:"input-group--focused",attrs:{label:"搜尋"},model:{value:t.order.search,callback:function(e){t.$set(t.order,"search",e)},expression:"order.search"}}),t._v(" "),0!=t.order.selected.length?a("v-layout",{attrs:{row:""}},[a("v-btn",{on:{click:function(e){return t.cancelOrder()}}},[t._v("取消訂單")]),a("v-btn",{on:{click:function(e){return t.changeState()}}},[t._v("變更貨品狀況")])],1):t._e(),t._v(" "),a("br"),t._v(" "),a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.order.headers,items:t.order.list,search:t.order.search,"select-all":"","item-key":"id",pagination:t.order.pagination},on:{"update:pagination":function(e){return t.$set(t.order,"pagination",e)}},scopedSlots:t._u([{key:"headerCell",fn:function(e){return[a("v-tooltip",{attrs:{bottom:""}},[a("span",{attrs:{slot:"activator"},slot:"activator"},[t._v("\n                "+t._s(e.header.text)+"\n                ")]),t._v(" "),a("span",[t._v("\n                "+t._s(e.header.text)+"\n                ")])])]}},{key:"items",fn:function(e){return[a("td",[a("v-checkbox",{attrs:{primary:"","hide-details":""},model:{value:e.selected,callback:function(a){t.$set(e,"selected",a)},expression:"props.selected"}})],1),t._v(" "),a("td",[t._v(t._s(e.item.id))]),t._v(" "),a("td",[t._v(t._s(e.item.name))]),t._v(" "),a("td",[t._v(t._s(e.item.cellphone))]),t._v(" "),a("td",[t._v(t._s(e.item.date))]),t._v(" "),a("td",[t._v(t._s(t.order.shipState[e.item.ship_type].text))]),t._v(" "),a("td",[t._v(t._s(e.item.money+t.order.shipState[e.item.ship_type].price))]),t._v(" "),a("td",[t._v(t._s(t.stateItems[e.item.state].text))]),t._v(" "),a("td",[a("v-btn",{attrs:{small:""},on:{click:function(a){return t.orderDetail(e.item.id)}}},[t._v("訂單內容")])],1)]}}]),model:{value:t.order.selected,callback:function(e){t.$set(t.order,"selected",e)},expression:"order.selected"}}),t._v(" "),a("br"),t._v(" "),a("v-divider"),t._v(" "),a("v-dialog",{attrs:{width:"300"},model:{value:t.order.cancelDialog,callback:function(e){t.$set(t.order,"cancelDialog",e)},expression:"order.cancelDialog"}},[a("v-card",{attrs:{width:"300",height:"200"}},[a("center",[a("br"),t._v(" "),a("br"),t._v(" "),a("font",{attrs:{size:"4"}},[t._v("確定要取消訂單?")])],1),t._v(" "),a("br"),t._v(" "),a("br"),t._v(" "),a("v-layout",{attrs:{row:"","justify-center":""}},[a("v-btn",{on:{click:function(e){return t.cancelOrderCheck()}}},[t._v("是")]),a("v-btn",{on:{click:function(e){t.order.cancelDialog=!1}}},[t._v("否")])],1),t._v(" "),a("br")],1)],1),t._v(" "),a("v-dialog",{attrs:{width:"1000"},model:{value:t.order.detailDialog,callback:function(e){t.$set(t.order,"detailDialog",e)},expression:"order.detailDialog"}},[a("v-card",{attrs:{flat:""}},[a("br"),t._v(" "),a("center",[a("font",{attrs:{size:"4"}},[a("p",[t._v("訂單內容")])])],1),t._v(" "),a("br"),t._v(" "),a("v-flex",{attrs:{"offset-xs1":""}},[a("p",[t._v("姓名: "+t._s(t.order.detail.name))]),t._v(" "),a("p",[t._v("手機: "+t._s(t.order.detail.cellphone))]),t._v(" "),a("p",[t._v("運送方式: "+t._s(t.order.shipState[t.order.detail.ship_type].text))]),t._v(" "),a("p",[t._v("地址: "+t._s(t.order.detail.address))]),t._v(" "),a("p",[t._v("金額: "+t._s(t.order.detail.money+t.order.shipState[t.order.detail.ship_type].price)+"(已含運)")]),t._v(" "),a("p",[t._v("貨品狀況: "+t._s(t.stateItems[t.order.detail.state].text))])]),t._v(" "),a("br"),t._v(" "),a("v-flex",{attrs:{xs10:"","offset-xs1":""}},[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.order.detail.headers,items:t.order.detail.list,"item-key":"id",pagination:t.order.detail.pagination},on:{"update:pagination":function(e){return t.$set(t.order.detail,"pagination",e)}},scopedSlots:t._u([{key:"headerCell",fn:function(e){return[a("v-tooltip",{attrs:{bottom:""}},[a("span",{attrs:{slot:"activator"},slot:"activator"},[t._v("\n                        "+t._s(e.header.text)+"\n                        ")]),t._v(" "),a("span",[t._v("\n                        "+t._s(e.header.text)+"\n                        ")])])]}},{key:"items",fn:function(e){return[a("td",[t._v(t._s(e.item.title))]),t._v(" "),a("td",[a("v-img",{attrs:{contain:"",src:e.item.pic[0].url,width:"180"}})],1),t._v(" "),a("td",[t._v(t._s(e.item.sell))])]}}])}),t._v(" "),a("br"),t._v(" "),a("br")],1)],1)],1),t._v(" "),a("v-dialog",{attrs:{width:"600"},model:{value:t.stateDialog,callback:function(e){t.stateDialog=e},expression:"stateDialog"}},[a("v-card",{attrs:{flat:""}},[a("br"),t._v(" "),a("br"),t._v(" "),a("v-flex",{attrs:{xs9:"","offset-xs1":""}},[a("center",[a("font",{attrs:{size:"4"}},[a("p",[t._v("變更貨品狀況")])])],1),t._v(" "),a("v-select",{attrs:{label:"貨品狀況",outline:"",items:t.stateItems,attach:"","item-value":"type","item-text":"text"},model:{value:t.state,callback:function(e){t.state=e},expression:"state"}}),t._v(" "),a("center",[a("v-btn",{on:{click:function(e){return t.changeStateCheck()}}},[t._v("變更")])],1)],1),t._v(" "),a("br"),t._v(" "),a("br"),t._v(" "),a("br")],1)],1)],1)},staticRenderFns:[]};var Vt={Left:X,Middle:K,Top:et,Home:nt,Member:lt,Publish:vt,UploadButton:ht,Product:bt,Type:yt,About:$t,Editorbar:Mt,Sell:Rt,Tree:a("VU/8")(zt,Pt,!1,function(t){a("3i99")},null,null).exports,Order:a("VU/8")(Et,Ft,!1,function(t){a("ifwB")},null,null).exports},Bt=(a("gJtD"),a("vz3t")),Ot=a.n(Bt);o.default.config.productionTip=!1,o.default.use(s.a),o.default.use(Ot.a),n()(Vt).forEach(function(t){o.default.component(t,Vt[t])}),new o.default({el:"#app",router:J,render:function(t){return t(l)}})},XdIG:function(t,e){},gJtD:function(t,e){},ifwB:function(t,e){},lUuB:function(t,e){},nveG:function(t,e){},shtZ:function(t,e){},wRaw:function(t,e){},xATl:function(t,e){},xFE2:function(t,e){},xz0C:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.d26cb1bac0d2cfb472c7.js.map